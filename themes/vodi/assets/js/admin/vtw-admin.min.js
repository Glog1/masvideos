!function(o,t){var i,v=o(document);i=function(d){function n(a){a.on("change",".widget_type",function(){var t=jQuery(this).val();jQuery(".spinner",a).addClass("is-active"),jQuery.ajax({data:{widget:t,action:"vodi_tabbed_get_settings_form",_nonce:Vodi_Tabbed_Widget_Settings.nonce},url:ajaxurl,type:"post",dataType:"html",success:function(t){var e=o(t),i=jQuery(".tabbed-widget-settings",a);i.html(e),jQuery(".spinner",a).removeClass("is-active"),v.trigger("widget-added",[i]),jQuery(window).trigger("resize")}})})}function r(i,a){a.on("change keyup","input, select, textarea",function(){var t=jQuery("input, select, textarea",a).serialize();if(jQuery("input.tab-value",i).val(t),0<jQuery('input[id*="-title"]',a).length){var e=jQuery('input[id*="-title"]',a).val()||Vodi_Tabbed_Widget_Settings.untitled;jQuery(".vodi-tw-label",i).text(e)}})}jQuery(".vodi-tw-tab-content",d).each(function(){n(jQuery(this))}),jQuery(".vodi-tw-nav li.vodi-tw-title",d).each(function(t){var e="tab-"+t+(new Date).getTime();jQuery(this).attr("data-for",e);var i=jQuery(".vodi-tw-tab-content",d).eq(t);i.attr("id",e),i.attr("data-index",t);var a=i.find(".widget.tabbed-widget-settings");0<a.length&&v.trigger("widget-added",[a])}),d.on("click",".vodi-tw-nav li.vodi-tw-title",function(t){if(t.preventDefault(),!jQuery(".dashicons",jQuery(this)).is(t.target)&&!jQuery(".vodi-tw-remove",jQuery(this)).is(t.target)&&!jQuery(this).hasClass("ui-state-disabled")){var e=jQuery(this).attr("data-for");jQuery(".vodi-tw-tab-content",d).removeClass("tab-active"),jQuery("#"+e+".vodi-tw-tab-content",d).addClass("tab-active"),jQuery(".vodi-tw-nav li",d).removeClass("nav-active"),jQuery(this).addClass("nav-active"),jQuery(".vodi-tw-nav li.vodi-tw-title",d).each(function(t){jQuery(this).hasClass("nav-active")&&jQuery("input.current_active",d).val(t)})}});var t=jQuery("input.current_active",d).val();t=parseInt(t),isNaN(t)&&(t=0),jQuery(".vodi-tw-nav li.vodi-tw-title",d).eq(t).length?jQuery(".vodi-tw-nav li.vodi-tw-title",d).eq(t).trigger("click"):jQuery(".vodi-tw-nav li.vodi-tw-title",d).eq(0).trigger("click"),jQuery(".vodi-tw-nav li.vodi-tw-title",d).each(function(t){var e="tab-"+t+(new Date).getTime(),i=jQuery(this);i.attr("data-for",e);var a=jQuery(".vodi-tw-tab-content",d).eq(t);a.attr("id",e),a.attr("data-index",t),r(i,a);var n=jQuery("input, select, textarea",a).serialize();jQuery("input.tab-value",i).val(n)}),jQuery(".vodi-tw-nav",d).sortable({containment:"parent",items:"li:not(.ui-state-disabled)",change:function(t,e){var i=(new Date).getTime();o(".base_tab_id",d).val(i).trigger("change")}}),d.on("click",".vodi-tw-nav li .vodi-tw-remove",function(t){t.preventDefault();var e,i=jQuery(this).parent();if(!i.hasClass("ui-state-disabled")){var a=i.attr("data-for");jQuery("#"+a+".vodi-tw-tab-content",d).remove(),i.remove();var n=jQuery(".vodi-tw-nav li.vodi-tw-title",d).length;(e=0)<jQuery(".vodi-tw-nav li.vodi-tw-title",d).eq(e).length?jQuery(".vodi-tw-nav li.vodi-tw-title",d).eq(e).trigger("click"):jQuery(".vodi-tw-nav li.vodi-tw-title",d).eq(0).trigger("click"),jQuery(window).trigger("resize"),n<=0&&jQuery(".no-tabs",d).show();var r=(new Date).getTime();o(".base_tab_id",d).val(r).trigger("change")}}),d.on("click",".add-new-tab",function(t){t.preventDefault();var e="tab-"+Math.floor(100*Math.random()+1)+(new Date).getTime();console.log("addnew");var i=jQuery(jQuery(".title-tpl",d).html());i.attr("data-for",e),jQuery(".vodi-tw-nav",d).append(i);var a=jQuery(jQuery(".settings-tpl",d).html());a.attr("id",e),jQuery(".vodi-tw-tab-contents",d).append(a),jQuery(window).trigger("resize"),n(a),r(i,a),i.trigger("click"),jQuery(".no-tabs",d).hide()})},t?t.bind("ready",function(t,e){o(".widgets-holder-wrap:not(#available-widgets)").find("div.widget").one("click.toggle-widget-expanded",function(){var t=o(this);new i(o(".vodi-tw-tabs",t))}),jQuery(document).on("widget-added widget-updated",function(t,e){new i(o(".vodi-tw-tabs",e))})}):(v.ready(function(){o(".widgets-holder-wrap:not(#available-widgets)").find("div.widget").one("click.toggle-widget-expanded",function(){var t=o(this);new i(o(".vodi-tw-tabs",t))}),jQuery(document).on("widget-added widget-updated",function(t,e){new i(o(".vodi-tw-tabs",e))})}),v.on("panelsopen",function(t){var e=o(t.target);new i(o(".vodi-tw-tabs",e))}))}(jQuery,wp.customize||null);