!function(){function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}return e}()({1:[function(e,t,n){"use strict";var r=e("../components/PostSelector"),o=e("../components/TermSelector"),i=wp.blocks.registerBlockType,s=wp.editor.InspectorControls,a=wp.components,l=a.ServerSideRender,c=(a.TextControl,a.RangeControl),u=a.SelectControl,p=a.CheckboxControl;i("masvideos/videos",{title:"Videos Block",icon:"video-alt3",category:"masvideos-blocks",edit:function(e){var t=e.attributes,n=(e.className,e.setAttributes),i=t.limit,a=t.columns,f=t.orderby,d=t.order,m=t.ids,h=t.category,y=t.featured,v=t.top_rated;return[wp.element.createElement(s,null,wp.element.createElement(c,{label:"Limit",value:i,onChange:function(e){n({limit:e})},min:1,max:50}),wp.element.createElement(c,{label:"Columns",value:a,onChange:function(e){n({columns:e})},min:1,max:10}),wp.element.createElement(u,{label:"Orderby",value:f,options:[{label:"Title",value:"title"},{label:"Date",value:"date"},{label:"ID",value:"id"},{label:"Random",value:"rand"}],onChange:function(e){n({orderby:e})}}),wp.element.createElement(u,{label:"Order",value:d,options:[{label:"ASC",value:"ASC"},{label:"DESC",value:"DESC"}],onChange:function(e){n({order:e})}}),wp.element.createElement(r.PostSelector,{postType:"video",selectedPostIds:m?m.split(",").map(Number):[],updateSelectedPostIds:function(e){n({ids:e.join(",")})}}),wp.element.createElement(o.TermSelector,{postType:"video",taxonomy:"video_cat",selectedTermIds:h?h.split(",").map(Number):[],updateSelectedTermIds:function(e){n({category:e.join(",")})}}),wp.element.createElement(p,{label:"Featured",help:"Check to select featured videos.",checked:y,onChange:function(e){n({featured:e})}}),wp.element.createElement(p,{label:"Top Rated",help:"Check to select top rated videos.",checked:v,onChange:function(e){n({top_rated:e})}})),wp.element.createElement(l,{block:"masvideos/videos",attributes:t})]},save:function(){return null}})},{"../components/PostSelector":4,"../components/TermSelector":5}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Item=void 0;n.Item=function(e){var t=e.title,n=(t=void 0===t?{}:t).rendered,r=e.name,o=e.clickHandler,i=e.id,s=e.icon;return wp.element.createElement("article",{className:"item"},wp.element.createElement("div",{className:"item-body"},wp.element.createElement("h3",{className:"item-title"},n,r)),wp.element.createElement("button",{onClick:function(){return o(i)}},s))}},{}],3:[function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.ItemList=void 0;var o=e("./Item");n.ItemList=function(e){var t=e.filtered,n=void 0!==t&&t,i=e.loading,s=void 0!==i&&i,a=e.items,l=void 0===a?[]:a,c=e.action,u=void 0===c?function(){}:c,p=e.icon,f=void 0===p?null:p;return s?wp.element.createElement("p",{className:"loading-items"},"Loading ..."):n&&l.length<1?wp.element.createElement("div",{className:"item-list"},wp.element.createElement("p",null,"Your query yielded no results, please try again.")):!l||l.length<1?wp.element.createElement("p",{className:"no-items"},"Not found."):wp.element.createElement("div",{"class":"item-list"},l.map(function(e){return wp.element.createElement(o.Item,r({key:e.id},e,{clickHandler:u,icon:f}))}))}},{"./Item":2}],4:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return a(e)||s(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(n,"__esModule",{value:!0}),n.PostSelector=void 0;var b=e("./ItemList"),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t["default"]=e,t}(e("../utils/api")),w=e("../utils/useful-funcs"),O=wp.components.Icon,P=wp.element.Component,S=function(e){function t(e){var n;return u(this,t),n=d(this,m(t).apply(this,arguments)),n.props=e,n.state={posts:[],loading:!1,type:e.postType||"post",types:[],filter:"",filterLoading:!1,filterPosts:[],initialLoading:!1},n.addPost=n.addPost.bind(v(v(n))),n.removePost=n.removePost.bind(v(v(n))),n.handleInputFilterChange=n.handleInputFilterChange.bind(v(v(n))),n.doPostFilter=(0,w.debounce)(n.doPostFilter.bind(v(v(n))),300),n}return h(t,P),f(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({initialLoading:!0}),g.getPostTypes().then(function(t){e.setState({types:t},function(){e.retrieveSelectedPosts().then(function(){e.setState({initialLoading:!1})})})})}},{key:"getPosts",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=this.props.selectedPostIds,r=l({},{per_page:10,type:this.state.type,search:this.state.filter},t);return r.restBase=this.state.types[this.state.type].rest_base,g.getPosts(r).then(function(t){return r.search?(e.setState({filterPosts:t.filter(function(e){var t=e.id;return-1===n.indexOf(t)})}),t):(e.setState({posts:(0,w.uniqueById)([].concat(o(e.state.posts),o(t)))}),t)})}},{key:"getSelectedPosts",value:function(){var e=this,t=this.props.selectedPostIds;return this.state.posts.filter(function(e){var n=e.id;return-1!==t.indexOf(n)}).sort(function(t,n){var r=e.props.selectedPostIds.indexOf(t.id),o=e.props.selectedPostIds.indexOf(n.id);return r>o?1:r<o?-1:0})}},{key:"retrieveSelectedPosts",value:function(){var e=this.props,t=e.postType,n=e.selectedPostIds;this.state.types;return n&&!n.length>0?new Promise(function(e){return e()}):this.getPosts({include:this.props.selectedPostIds.join(","),per_page:100,postType:t})}},{key:"addPost",value:function(e){if(this.state.filter){var t=this.state.filterPosts.filter(function(t){return t.id===e}),n=(0,w.uniqueById)([].concat(o(this.state.posts),o(t)));this.setState({posts:n})}this.props.updateSelectedPostIds([].concat(o(this.props.selectedPostIds),[e]))}},{key:"removePost",value:function(e){this.props.updateSelectedPostIds(o(this.props.selectedPostIds).filter(function(t){return t!==e}))}},{key:"handleInputFilterChange",value:function(){var e=this,t=(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).target,n=(t=void 0===t?{}:t).value,r=void 0===n?"":n;this.setState({filter:r},function(){if(!r)return e.setState({filteredPosts:[],filtering:!1});e.doPostFilter()})}},{key:"doPostFilter",value:function(){var e=this,t=this.state.filter;(void 0===t?"":t)&&(this.setState({filtering:!0,filterLoading:!0}),this.getPosts().then(function(){e.setState({filterLoading:!1})}))}},{key:"render",value:function(){var e=this.state.filtering,t=e&&!this.state.filterLoading?this.state.filterPosts:[],n=this.getSelectedPosts(),r=wp.element.createElement(O,{icon:"plus"}),o=wp.element.createElement(O,{icon:"minus"});return wp.element.createElement("div",{className:"components-base-control components-post-selector"},wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:"searchinput",className:"components-base-control__label"},wp.element.createElement(O,{icon:"search"})),wp.element.createElement("input",{className:"components-text-control__input",id:"searchinput",type:"search",placeholder:"Please enter your search query...",value:this.state.filter,onChange:this.handleInputFilterChange}),wp.element.createElement(b.ItemList,{items:t,loading:this.state.initialLoading||this.state.loading||this.state.filterLoading,filtered:e,action:this.addPost,icon:r})),wp.element.createElement("div",{className:"components-base-control__field--selected"},wp.element.createElement("h2",null,"Selected"),wp.element.createElement(b.ItemList,{items:n,loading:this.state.initialLoading,action:this.removePost,icon:o})))}}]),t}();n.PostSelector=S},{"../utils/api":6,"../utils/useful-funcs":7,"./ItemList":3}],5:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return a(e)||s(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(n,"__esModule",{value:!0}),n.TermSelector=void 0;var b=e("./ItemList"),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t["default"]=e,t}(e("../utils/api")),w=e("../utils/useful-funcs"),O=wp.components.Icon,P=wp.element.Component,S=function(e){function t(e){var n;return u(this,t),n=d(this,m(t).apply(this,arguments)),n.props=e,n.state={terms:[],loading:!1,type:e.postType||"post",taxonomy:e.taxonomy||"category",taxonomies:[],filter:"",filterLoading:!1,filterTerms:[],initialLoading:!1},n.addTerm=n.addTerm.bind(v(v(n))),n.removeTerm=n.removeTerm.bind(v(v(n))),n.handleInputFilterChange=n.handleInputFilterChange.bind(v(v(n))),n.doTermFilter=(0,w.debounce)(n.doTermFilter.bind(v(v(n))),300),n}return h(t,P),f(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({initialLoading:!0}),g.getTaxonomies({type:this.state.type}).then(function(t){e.setState({taxonomies:t},function(){e.retrieveSelectedTerms().then(function(){e.setState({initialLoading:!1})})})})}},{key:"getTerms",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=this.props.selectedTermIds,r=l({},{per_page:10,type:this.state.type,taxonomy:this.state.taxonomy,search:this.state.filter},t);return r.restBase=this.state.taxonomies[this.state.taxonomy].rest_base,g.getTerms(r).then(function(t){return r.search?(e.setState({filterTerms:t.filter(function(e){var t=e.id;return-1===n.indexOf(t)})}),t):(e.setState({terms:(0,w.uniqueById)([].concat(o(e.state.terms),o(t)))}),t)})}},{key:"getSelectedTerms",value:function(){var e=this,t=this.props.selectedTermIds;return this.state.terms.filter(function(e){var n=e.id;return-1!==t.indexOf(n)}).sort(function(t,n){var r=e.props.selectedTermIds.indexOf(t.id),o=e.props.selectedTermIds.indexOf(n.id);return r>o?1:r<o?-1:0})}},{key:"retrieveSelectedTerms",value:function(){var e=this.props,t=e.termType,n=e.selectedTermIds;this.state.taxonomies;return n&&!n.length>0?new Promise(function(e){return e()}):this.getTerms({include:this.props.selectedTermIds.join(","),per_page:100,termType:t})}},{key:"addTerm",value:function(e){if(this.state.filter){var t=this.state.filterTerms.filter(function(t){return t.id===e}),n=(0,w.uniqueById)([].concat(o(this.state.terms),o(t)));this.setState({terms:n})}this.props.updateSelectedTermIds([].concat(o(this.props.selectedTermIds),[e]))}},{key:"removeTerm",value:function(e){this.props.updateSelectedTermIds(o(this.props.selectedTermIds).filter(function(t){return t!==e}))}},{key:"handleInputFilterChange",value:function(){var e=this,t=(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).target,n=(t=void 0===t?{}:t).value,r=void 0===n?"":n;this.setState({filter:r},function(){if(!r)return e.setState({filteredTerms:[],filtering:!1});e.doTermFilter()})}},{key:"doTermFilter",value:function(){var e=this,t=this.state.filter;(void 0===t?"":t)&&(this.setState({filtering:!0,filterLoading:!0}),this.getTerms().then(function(){e.setState({filterLoading:!1})}))}},{key:"render",value:function(){var e=this.state.filtering,t=e&&!this.state.filterLoading?this.state.filterTerms:[],n=this.getSelectedTerms(),r=wp.element.createElement(O,{icon:"plus"}),o=wp.element.createElement(O,{icon:"minus"});return wp.element.createElement("div",{className:"components-base-control components-term-selector"},wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:"searchinput",className:"components-base-control__label"},wp.element.createElement(O,{icon:"search"})),wp.element.createElement("input",{className:"components-text-control__input",id:"searchinput",type:"search",placeholder:"Please enter your search query...",value:this.state.filter,onChange:this.handleInputFilterChange}),wp.element.createElement(b.ItemList,{items:t,loading:this.state.initialLoading||this.state.loading||this.state.filterLoading,filtered:e,action:this.addTerm,icon:r})),wp.element.createElement("div",{className:"components-base-control__field--selected"},wp.element.createElement("h2",null,"Selected"),wp.element.createElement(b.ItemList,{items:n,loading:this.state.initialLoading,action:this.removeTerm,icon:o})))}}]),t}();n.TermSelector=S},{"../utils/api":6,"../utils/useful-funcs":7,"./ItemList":3}],6:[function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}Object.defineProperty(n,"__esModule",{value:!0}),n.getTerms=n.getTaxonomies=n.getPosts=n.getPostTypes=void 0;var s=wp.apiFetch;n.getPostTypes=function(){return s({path:"/wp/v2/types"})};n.getPosts=function(e){var t=e.restBase,n=void 0!==t&&t,r=o(e,["restBase"]),i=Object.keys(r).map(function(e){return"".concat(e,"=").concat(r[e])}).join("&"),a="/wp/v2/".concat(n,"?").concat(i,"&_embed");return s({path:a})};n.getTaxonomies=function(e){var t=r({},e),n=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&"),o="/wp/v2/taxonomies?".concat(n,"&_embed");return s({path:o})};n.getTerms=function(e){var t=e.restBase,n=void 0!==t&&t,r=o(e,["restBase"]),i=Object.keys(r).map(function(e){return"".concat(e,"=").concat(r[e])}).join("&"),a="/wp/v2/".concat(n,"?").concat(i,"&_embed");return s({path:a})}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.debounce=n.uniqueById=n.uniqueBy=void 0;var r=function(e,t){var n=[];return e.filter(function(e){return-1===n.indexOf(e[t])&&n.push(e[t])})};n.uniqueBy=r;n.uniqueById=function(e){return r(e,"id")};n.debounce=function(e,t){var n=null;return function(){var r=this,o=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,o)},t)}}},{}]},{},[1]);